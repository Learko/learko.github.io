<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <title>Detecting Speculative Execution</title>

    <meta name="author" content="Anton Matveev">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <link rel="stylesheet" href="css/timeline.css">

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Hightcharts -->
    <script src="highcharts/highcharts.js"></script>
    <script src="highcharts/highcharts-3d.js"></script>
    <script src="highcharts/modules/exporting.js"></script>
    <script src="highcharts/modules/export-data.js"></script>

    <!-- Chart.js -->
    <script src="chartjs/chart.bundle.min.js"></script>
    <script src="chartjs/utils.js"></script>

    <style type="text/css">
        .reveal h3 {
            margin-bottom: 70px;
        }

        .reveal section img {
            background: none;
            border: none;
            box-shadow: none;
            max-height: calc(66vh);
            max-width: calc(66vw);
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">

            <section class="center">
                <h3 style="padding-top: 50px;">Обнаружение атак на механизмы спекулятивного исполнения команд</h3>
                <div style="float: right; padding-top: 100px;">
                    <p align="left" >
                        <small>
                            Студент: Матвеев А. С. ФО-450002<br>
                            Руководитель: Гейн А. А. <br>
                        </small>
                    </p>
                </div>
                <div style="clear: both; padding-top: 70px;">                
                    <p><small>Екатеринбург, 2019</small></p>
                </div>

                <aside class="notes">
                    <small>

                    </small>
                </aside>
            </section>

            <section>
                <h4>Проблема</h4>

                <small style="float: left; padding-top: 50px;">
                    <ul>
                        <li class="fragment" data-fragment-index="1">
                            <small><h4>2 Января, 2018.</h4></small>
                            <h6>Spectre variant 1</h6>
                            <h6>Spectre variant 2</h6>
                            <h6>Meltdown (variant 3)</h6>
                        </li>
                        <li class="fragment" data-fragment-index="2">
                            <small><h4 style="color: green">21 Февраля, 2018</h4></small>
                            <h6>Retpoline</h6>
                        </li>
                        <li class="fragment" data-fragment-index="3">
                            <small><h4>21 Мая, 2018</h4></small>
                            <h6>Rogue System Register Read (variant 3a)</h6>
                            <h6>Speculative Store Bypass (variant 4)</h6>
                        </li>
                        <li class="fragment" data-fragment-index="4">
                            <h6>...</h6>
                        </li>
                    </ul>
                </small>

                <div style="float: right; margin-top: 70px;">
                    <img class="fragment stretch" data-fragment-index="1" style="max-height: 200px;" src="img/logo/meltdown.png">
                    <img class="fragment stretch" data-fragment-index="1" style="max-height: 200px;" src="img/logo/spectre.png">
                </div>
            </section>

            <section>
                <h4>Решение?</h4>

                <small style="float: left; padding-top: 50px;">
                    <ul>
                        <li class="fragment" data-fragment-index="5">
                            <small><h4 style="color: green">4 Марта, 2019</h4></small>
                            <h6>Windows 10 (19H1) (Retpoline)</h6>
                        </li>
                        <li class="fragment" data-fragment-index="1">
                            <small><h4 style="color: green">2 Апреля, 2019.</h4></small>
                            <h6>Intel Cascade Lake</h6>
                        </li>
                        <li class="fragment" data-fragment-index="2">
                            <small><h4>14 Мая, 2019.</h4></small>
                            <h6>MDS</h6>
                            <div class="fragment" data-fragment-index="3" style="padding-left: 30px; padding-top: -10px;">
                                CVE-2018-12126 <br>
                                CVE-2018-12127 <br>
                                CVE-2018-12130 <br>
                                CVE-2019-11091 <br>
                            </div>
                        </li>
                        <li class="fragment" data-fragment-index="4">
                            <h6>...</h6>
                        </li>
                    </ul>
                </small>

                <div style="float: right; padding-top: 120px;">
                    <img class="fragment" data-fragment-index="3" src="img/logo/zombieland.png" style="max-width: 180px;">
                    <img class="fragment" data-fragment-index="3" src="img/logo/ridl.png" style="max-width: 180px;">
                    <img class="fragment" data-fragment-index="3" src="img/logo/fallout.png" style="max-width: 180px;">
                </div>
            </section>

            <section>
                <h4>Важность</h4>

                <ul style="float: left; padding-top: 70px">
                    <li class="fragment">Читать всю оперативную память</li>
                    <li class="fragment">Через браузер</li>
                </ul>
            </section>

            <section>
                <h4>Важность</h4>

                <ul style="float: left; padding-top: 100px">
                    <li class="fragment" data-fragment-index="1" data-autoslide="250">Intel</li>
                    <li class="fragment" data-fragment-index="2" data-autoslide="250">AMD</li>
                    <li class="fragment" data-fragment-index="3" data-autoslide="250">Apple</li>
                    <li class="fragment" data-fragment-index="4" data-autoslide="250">ARM</li>
                    <li class="fragment" data-fragment-index="5" data-autoslide="1000">...</li>
                    <li class="fragment" data-fragment-index="6">Motorola</li>
                </ul>

                <div style="float: right;">
                    <img class="fragment" data-fragment-index="1" style="float: left; max-width: 128px; margin-top: 70px;" src="img/logo/intel.png">
                    <img class="fragment" data-fragment-index="2" style="float: right; max-width: 128px; margin-top: 55px;" src="img/logo/amd.png">
                    <img class="fragment" data-fragment-index="3" style="float: left; max-width: 128px; margin-top: 270px;" src="img/logo/apple.png">
                    <img class="fragment" data-fragment-index="4" style="float: right; max-width: 128px; margin-top: 320px;" src="img/logo/arm.png">
                    <img class="fragment" data-fragment-index="6" style="float: left; max-width: 128px; margin-top: 70px;" src="img/logo/motorola.png">
                </div>
            </section>

            <section>
                <h4>Цели и задачи</h4>

                <ul style="float: left; padding-top: 70px">
                    <li>Исследовать существующие атаки</li>
                    <li>Проанализировать механизмы защиты</li>
                </ul>

                <ul style="float: left; padding-top: 70px">
                    <li>Предложить решение</li>
                    <li>Проверить работоспособность/эффективность</li>
                </ul>
            </section>

            <section>
                <h4>Абстрактный сервис</h4>

                <ul style="float: left; margin-top: 70px;">
                    <li class="fragment" data-fragment-index="1">Задержки</li>
                    <li class="fragment" data-fragment-index="2">Капча</li>
                </ul>

                <div style="float: right; margin-top: 50px;">
                    <img class="fragment" data-fragment-index="1" style="height: 500px;" src="img/ios.png">
                    <img class="fragment" data-fragment-index="2" style="height: 500px;" src="img/captcha.png">
                </div>
            </section>

            <section>
                <h4>Абстрактный сервис</h4>

                <small style="padding-top: 70px;"><h5>Журнал событий</h5></small>
                <img class="stretch" style="padding-top: 10px;" src="img/logs.png">
            </section>

            <section>
                <h4>Аппаратные счетчики производительности</h4>

                <div class="fragment" data-fragment-index="1" style="float: left; padding-top: 70px;">
                    <small>
                        <h5>Основная группа</h5><br>

                        <ul>
                            <li style="font-size: 1.1em; line-height: 1.5;">Попадания в кэш</li>
                            <li style="font-size: 1.1em; line-height: 1.5;">Предсказатель ветвлений</li>
                        </ul>
                    </small>
                </div>

                <div class="fragment" data-fragment-index="1" style="float: right; padding-top: 70px;">
                    <small>
                        <h5>Дополнительная группа</h5><br>

                        <ul>
                            <li style="font-size: 1.1em; line-height: 1.5;">Кэши данных первого/последнего уровней</li>
                            <li style="font-size: 1.1em; line-height: 1.5;">Буфер ассоциативной трансляции</li>
                            <li style="font-size: 1.1em; line-height: 1.5;">Косвенные переходы</li>
                            <li style="font-size: 1.1em; line-height: 1.5;">Предсказания адресов возврата</li>
                            <li style="font-size: 1.1em; line-height: 1.5;">Ошибки сегментации/TSX</li>
                        </ul>
                    </small>
                </div>
            </section>

            <section>
                <h4>Аппаратные счетчики производительности</h4>

                <small>
                    <table style="margin-top: 70px;">
                        <thead>
                            <tr>
                                <th rowspan="2">Активность</th>
                                <th colspan="2">Система</th>
                                <th colspan="2">Процесс</th>
                            </tr>
                            <tr>
                                <th>Отношение промахов в кэш к общему числу обращений</th>
                                <th>Отношение числа неправильных предсказаний к общему числу предсказаний</th>
                                <th>Отношение промахов в кэш к общему числу обращений</th>
                                <th>Отношение числа неправильных предсказаний к общему числу предсказаний</th>
                            </tr>
                        </tr></thead>
                        <tbody>
                            <tr>
                                <td>Нормальная</td>
                                <td>0.1 - 0.3</td>
                                <td>0.04 - 0.07</td>
                                <td>0.02 (усредненное)</td>
                                <td>0.05 (усредненное)</td>
                            </tr>
                            <tr>
                                <td>Meltdown</td>
                                <td>0.5 - 0.7</td>
                                <td>0.001</td>
                                <td>&gt; 0.9</td>
                                <td>0.0004</td>
                            </tr>
                            <tr>
                                <td>Spectre v1</td>
                                <td>*</td>
                                <td>0.0001</td>
                                <td>*</td>
                                <td>&lt; 0.000001</td>
                            </tr>
                        </tbody>
                    </table>
                </small>
            </section>

            <section data-state="counters_event">
                <h4>Архитектура</h4>

                <ol style="float: left; padding-top: 80px; margin-left: -70px; max-width: 400px;">
                    <small>
                        <li>Отслеживаем состояния счетчиков для всей системы<br><br></li>
                        <li class="fragment">При нахождении «аномалии» – анализируем конкретные процессы<br><br></li>
                        <li class="fragment">Находим процесс с подозрительной активностью<br><br></li>
                        <li class="fragment">Классифицируем, используя события из дополнительной группы*<br><br></li>
                        <li class="fragment">Принимаем меры</li>
                    </small>
                </ol>

                <div style="float: right; width: 600px; padding-top: 100px;">
                    <canvas id="counters_chart"></canvas>
                </div>
            </section>

            <section class="center" data-background-iframe="https://xlab.tencent.com/special/spectre/spectre_check.html" data-background-interactive>
                <div style="position: absolute; width: 20%; right: 0; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px; padding-top: 40px; font-size: 20px; text-align: center;">
                        <h2 style="color: #fff">Демо</h2>
                    </div>
            </section>

            <section>
                <h4>Итоги</h4>

                <ul style="float: left; padding-top: 100px;">
                    <li class="fragment">Работает</li>
                    <li class="fragment">Стабильно</li>
                    <li class="fragment">Еще до начала атаки*</li>
                    <li class="fragment">Накладные расходы</li>
                </ul>
            </section>

            <section class="center">
                <h3 style="padding-top: 200px;">Спасибо за внимание</h3>

                <div style="float: right; padding-top: 50px;">
                    <p align="left" >
                        <small>
                            Студент: Матвеев А. С. ФО-450002<br>
                            Руководитель: Гейн А. А. <br>
                        </small>
                    </p>
                </div>
            </section>


        </div>
    </div>


    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
        Reveal.initialize({
            controls: false,
            progress: true,
            history: true,
            slideNumber: 'c/t',
            center: false,
            transition: 'none', // none/fade/slide/convex/concave/zoom
            dependencies: [
                { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                { src: 'plugin/search/search.js', async: true },
                { src: 'plugin/zoom-js/zoom.js', async: true },
                { src: 'plugin/notes/notes.js', async: true }
            ]
        });

        Reveal.addEventListener('counters_event', function() {
            var config = {
                type: 'line',
                data: {
                    labels: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '100'],
                    datasets: [{
                        label: 'Кэш',
                        backgroundColor: window.chartColors.red,
                        borderColor: window.chartColors.red,
                        data: [],
                        fill: false,
                    }, {
                        label: 'Предсказатель ветвлений',
                        backgroundColor: window.chartColors.blue,
                        borderColor: window.chartColors.blue,
                        data: [],
                        fill: false,
                    }]
                },
                options: {
                    title: {
                        display: false
                    },
                    legend: {
                        display: true
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true,
                                min: 0.0,
                                max: 0.5
                            }
                        }],
                        xAxes: [{
                            display: false,
                            ticks: {
                                beginAtZero: true,
                                min: 0,
                                max: 100
                            }
                        }]
                    }
                }
            };

            var chart = new Chart('counters_chart', config);

            var counter = 0;
            var interval = setInterval(function() {
                config.data.datasets[0].data.push(cache_counters[counter]);
                config.data.datasets[1].data.push(branch_counters[counter]);

                if (++counter == 99) {
                    clearInterval(interval);
                }

                chart.update();
            }, 50);
        }, false);
    </script>

    <a class="fork-reveal" style="display: block;" href="https://github.com/hakimel/reveal.js"><img style="position: absolute; top: 20px; right: 20px; border: 0; max-width: 90px;" src="img/urfu.png" alt="UrFU"></a>

    <!-- I'm so sorry. -->
    <script type="text/javascript">
        var cache_counters = [0.240599, 0.286559, 0.26848, 0.275043, 0.285512, 0.271176, 0.286919, 0.31315, 0.253425, 0.288001, 0.283599, 0.299895, 0.282679, 0.252382, 0.279163, 0.28894, 0.283737, 0.278277, 0.30258, 0.306696, 0.249141, 0.301573, 0.261912, 0.239168, 0.236422, 0.254212, 0.256095, 0.326679, 0.300927, 0.32791, 0.307228, 0.31188, 0.341224, 0.385128, 0.33746, 0.281277, 0.247187, 0.254524, 0.218398, 0.156063, 0.15887, 0.184349, 0.224694, 0.249018, 0.220243, 0.234445, 0.158613, 0.183001, 0.185962, 0.185724, 0.183935, 0.187344, 0.232075, 0.257872, 0.19732, 0.224553, 0.205918, 0.189269, 0.163533, 0.229517, 0.26577, 0.166308, 0.208231, 0.307484, 0.219233, 0.239144, 0.17821, 0.250751, 0.337688, 0.233545, 0.223013, 0.312243, 0.22822, 0.233324, 0.181274, 0.224259, 0.226275, 0.234876, 0.218575, 0.226009, 0.201271, 0.23788, 0.231626, 0.21024, 0.219947, 0.228212, 0.280697, 0.0474473, 0.29677, 0.257457, 0.290511, 0.165792, 0.204883, 0.202185, 0.177294, 0.234891, 0.203894, 0.234445, 0.209196, 0.214835];

        var branch_counters = [0.064822, 0.0533055, 0.0535126, 0.0518613, 0.0544144, 0.0546651, 0.0536995, 0.0454894, 0.0564228, 0.0534969, 0.056082, 0.0375994, 0.0533338, 0.0563949, 0.0511363, 0.0527316, 0.053702, 0.0549887, 0.0473915, 0.0490706, 0.0468594, 0.0513259, 0.0564953, 0.0624711, 0.0685759, 0.0709803, 0.0660292, 0.0417058, 0.050774, 0.0497361, 0.0484006, 0.0330014, 0.0332106, 0.0276189, 0.0311018, 0.0337567, 0.0398999, 0.0335654, 0.033744, 0.0457009, 0.0717653, 0.046762, 0.0218643, 0.0323172, 0.0291851, 0.029603, 0.0382539, 0.0673224, 0.0532157, 0.0447801, 0.0681521, 0.0575033, 0.0357499, 0.0434266, 0.0600713, 0.0597185, 0.0565919, 0.0747698, 0.0666142, 0.0510132, 0.0332136, 0.0846132, 0.0711132, 0.0334018, 0.0501436, 0.0577016, 0.0726515, 0.0684948, 0.0295778, 0.062294, 0.0600037, 0.0271874, 0.0577802, 0.057032, 0.0373987, 0.0633782, 0.0654993, 0.0702284, 0.0692321, 0.0631057, 0.0568448, 0.0654145, 0.0405957, 0.0699347, 0.061014, 0.0693899, 0.0135005, 0.000970315, 0.0323686, 0.0468375, 0.0283033, 0.0599505, 0.0604855, 0.060022, 0.05353, 0.061668, 0.0598928, 0.0684487, 0.0658326, 0.0397642];
    </script>

</body>
</html>
